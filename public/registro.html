<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de usuario</title>
</head>
<body>
    <!-- Formulario de registro de usuario -->
    <div>
        <h2>Registro y eliminación de usuario </h2>
        <form id="registerForm">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required>
            <br><br>
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" name="apellido" required>
            <br><br>
            <label for="rut">Rut:</label>
            <input type="text" id="rut" name="rut" required pattern="[0-9]{1,10}" title="Solo números enteros" oninput="validarRut(this)">
            <br><br>
            <label for="dv_rut">Dv-Rut:</label>
            <input type="text" id="dv_rut" name="dv_rut" required pattern="[0-9Kk]" maxlength="1" title="Debe ser un número o la letra K">
            <br><br>
            <label for="correo">Correo electrónico:</label>
            <input type="email" id="correo" name="correo" required>
            <br><br>
            <label for="usuario">Usuario:</label>
            <input type="text" id="usuario" name="usuario" required>
            <br><br>
            <label for="contraseña">Contraseña:</label>
            <input type="password" id="contraseña" name="contraseña" required minlength="6" title="La contraseña debe tener al menos 6 caracteres">
            <br><br>
            <label for="rol">Rol:</label>
            <select id="rol" name="rol" required>
                <option value="usuario">Usuario</option>
                <option value="admin">Administrador</option>
            </select>
            <br><br>
            <input type="submit" value="Registrar usuario">
            <br><br>
            <button type="button" onclick="window.location.href='index.html';">Ir a mapa</button>
            <br><br>
            <!-- Nuevo botón para ir a admin.html -->
            <button type="button" onclick="window.location.href='admin.html';">Ir a Admin</button>
        </form>
        <p id="mensajeRegistro"></p>
    </div>
    <script>
     const _0x36fd63=_0x266a;(function(_0x903519,_0xa9e4e4){const _0x2d55c9=_0x266a,_0x11769a=_0x903519();while(!![]){try{const _0x326855=-parseInt(_0x2d55c9(0x200))/0x1*(parseInt(_0x2d55c9(0x1f7))/0x2)+parseInt(_0x2d55c9(0x208))/0x3+-parseInt(_0x2d55c9(0x207))/0x4*(-parseInt(_0x2d55c9(0x201))/0x5)+-parseInt(_0x2d55c9(0x1fd))/0x6+parseInt(_0x2d55c9(0x1ef))/0x7*(parseInt(_0x2d55c9(0x1f0))/0x8)+parseInt(_0x2d55c9(0x1f2))/0x9+-parseInt(_0x2d55c9(0x205))/0xa*(parseInt(_0x2d55c9(0x20c))/0xb);if(_0x326855===_0xa9e4e4)break;else _0x11769a['push'](_0x11769a['shift']());}catch(_0x1b0df5){_0x11769a['push'](_0x11769a['shift']());}}}(_0x4700,0x48019));function _0x266a(_0x371779,_0x1d574a){const _0x4700c4=_0x4700();return _0x266a=function(_0x266a70,_0x44bb44){_0x266a70=_0x266a70-0x1ed;let _0x54ff87=_0x4700c4[_0x266a70];return _0x54ff87;},_0x266a(_0x371779,_0x1d574a);}function _0x4700(){const _0x555702=['catch','registerForm','35iFgUFk','928344IfeEkL','mensajeRegistro','614304GUsxBQ','apellido','submit','correo','application/json','1052ivHwnh','message','value','then','toUpperCase','red','831390eGpCzI','stringify','color','218vNrkQA','275cltTaH','test','POST','Error:','1044520BUmQiu','getElementById','36364jARcFG','392574UYXZag','reset','innerText','usuario','77DrKPSQ','preventDefault','setCustomValidity','json','rol','error','nombre','http://localhost:3001/registro','Usuario\x20registrado\x20con\x20éxito','contraseña','style','green'];_0x4700=function(){return _0x555702;};return _0x4700();}function validarRut(_0x5d89e4){const _0x18465a=_0x266a,_0x566d97=_0x5d89e4['value'],_0x197ff2=/^[0-9]{1,10}$/;!_0x197ff2[_0x18465a(0x202)](_0x566d97)?_0x5d89e4[_0x18465a(0x20e)]('El\x20RUT\x20solo\x20debe\x20contener\x20números.'):_0x5d89e4[_0x18465a(0x20e)]('');}document[_0x36fd63(0x206)](_0x36fd63(0x1ee))['addEventListener'](_0x36fd63(0x1f4),function(_0x30e2da){const _0x8151d=_0x36fd63;_0x30e2da[_0x8151d(0x20d)]();const _0xc6c8c6=document[_0x8151d(0x206)](_0x8151d(0x212))[_0x8151d(0x1f9)],_0x208946=document[_0x8151d(0x206)](_0x8151d(0x1f3))[_0x8151d(0x1f9)],_0x1f3fa2=document['getElementById']('rut')[_0x8151d(0x1f9)],_0xc4b7eb=document['getElementById']('dv_rut')['value'][_0x8151d(0x1fb)](),_0x24d3d7=document[_0x8151d(0x206)](_0x8151d(0x1f5))[_0x8151d(0x1f9)],_0x3cfe08=document['getElementById'](_0x8151d(0x20b))['value'],_0x25b7fd=document[_0x8151d(0x206)](_0x8151d(0x215))[_0x8151d(0x1f9)],_0x52fd48=document[_0x8151d(0x206)](_0x8151d(0x210))['value'];fetch(_0x8151d(0x213),{'method':_0x8151d(0x203),'headers':{'Content-Type':_0x8151d(0x1f6)},'body':JSON[_0x8151d(0x1fe)]({'nombre':_0xc6c8c6,'apellido':_0x208946,'rut':_0x1f3fa2,'dv_rut':_0xc4b7eb,'correo':_0x24d3d7,'usuario':_0x3cfe08,'contraseña':_0x25b7fd,'rol':_0x52fd48})})[_0x8151d(0x1fa)](_0x30178f=>_0x30178f[_0x8151d(0x20f)]())[_0x8151d(0x1fa)](_0x5c30f2=>{const _0x2aba8b=_0x8151d;_0x5c30f2['success']?(document['getElementById'](_0x2aba8b(0x1f1))[_0x2aba8b(0x20a)]=_0x2aba8b(0x214),document[_0x2aba8b(0x206)]('mensajeRegistro')['style'][_0x2aba8b(0x1ff)]=_0x2aba8b(0x217),document['getElementById'](_0x2aba8b(0x1ee))[_0x2aba8b(0x209)]()):(document[_0x2aba8b(0x206)](_0x2aba8b(0x1f1))['innerText']='Error\x20al\x20registrar\x20usuario:\x20'+_0x5c30f2[_0x2aba8b(0x1f8)],document[_0x2aba8b(0x206)](_0x2aba8b(0x1f1))['style'][_0x2aba8b(0x1ff)]=_0x2aba8b(0x1fc));})[_0x8151d(0x1ed)](_0x1ee574=>{const _0x3d06f5=_0x8151d;console[_0x3d06f5(0x211)](_0x3d06f5(0x204),_0x1ee574),document[_0x3d06f5(0x206)](_0x3d06f5(0x1f1))[_0x3d06f5(0x20a)]='Error\x20en\x20la\x20solicitud',document[_0x3d06f5(0x206)]('mensajeRegistro')[_0x3d06f5(0x216)]['color']=_0x3d06f5(0x1fc);});});
    </script>
</body>
</html>
